{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["\nimport type { NextRequest } from 'next/server';\nimport { NextResponse } from 'next/server';\n\nconst AUTH_COOKIE_NAME = \"swiftcart-auth-token\";\nconst PROTECTED_APP_PATHS = [\n  '/dashboard', \n  '/products', // Keep existing /products as protected\n  '/admin', \n  '/about', \n  '/checkout', \n  '/settings', \n  '/orders', // Main orders page\n  '/expenses',\n  // Note: /admin/products is covered by /admin\n  '/points',\n  '/request',\n  '/download-log'\n];\nconst LOGIN_PATH = '/login';\n\nexport function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl;\n  const authToken = request.cookies.get(AUTH_COOKIE_NAME);\n\n  const isAppPath = PROTECTED_APP_PATHS.some(p => pathname.startsWith(p));\n\n  // If trying to access a protected app path without an auth token, redirect to login\n  if (isAppPath && !authToken) {\n    const loginUrl = new URL(LOGIN_PATH, request.url);\n    loginUrl.searchParams.set('redirect', pathname); // Optional: add redirect query param\n    return NextResponse.redirect(loginUrl);\n  }\n\n  // If trying to access login page with an auth token, redirect to dashboard\n  if (pathname === LOGIN_PATH && authToken) {\n    return NextResponse.redirect(new URL('/dashboard', request.url));\n  }\n\n  return NextResponse.next();\n}\n\nexport const config = {\n  matcher: [\n    // Match all routes except for static assets, API routes, and the landing page\n    '/((?!api|_next/static|_next/image|favicon.ico|.*\\\\..*).*)',\n    // Explicitly include root for landing page (which does not need auth)\n    // but exclude it from general protection logic if it's not in PROTECTED_APP_PATHS\n  ],\n};\n"],"names":[],"mappings":";;;;AAEA;AAAA;;AAEA,MAAM,mBAAmB;AACzB,MAAM,sBAAsB;IAC1B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,6CAA6C;IAC7C;IACA;IACA;CACD;AACD,MAAM,aAAa;AAEZ,SAAS,WAAW,OAAoB;IAC7C,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IACpC,MAAM,YAAY,QAAQ,OAAO,CAAC,GAAG,CAAC;IAEtC,MAAM,YAAY,oBAAoB,IAAI,CAAC,CAAA,IAAK,SAAS,UAAU,CAAC;IAEpE,oFAAoF;IACpF,IAAI,aAAa,CAAC,WAAW;QAC3B,MAAM,WAAW,IAAI,IAAI,YAAY,QAAQ,GAAG;QAChD,SAAS,YAAY,CAAC,GAAG,CAAC,YAAY,WAAW,qCAAqC;QACtF,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,2EAA2E;IAC3E,IAAI,aAAa,cAAc,WAAW;QACxC,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,QAAQ,GAAG;IAChE;IAEA,OAAO,6LAAA,CAAA,eAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP,8EAA8E;QAC9E;KAGD;AACH"}}]
}